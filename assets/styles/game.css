/* assets/styles/game.css */
/* =====================================================
   FinKids Tycoon — Stiluri pentru jocul manual
   - layout 3 coloane (Comandă · Build · Bake/Serve)
   - build stage (dropzone + chips)
   - cuptor + progres + fereastră „hit”
   - toasts, particule, mici animații
   ===================================================== */

/* Layout principal al jocului */
.game-layout{
  display:grid;
  grid-template-columns:320px 1fr 380px;
  gap:12px;
  padding:12px;
  min-height:calc(100vh - 56px);
}

/* Panouri */
.game-panel{
  background:#fffef7;
  border:2px solid var(--frame);
  border-radius:12px;
  padding:12px;
}

/* Cardul de comandă */
.order-card{
  background:#fffbee;
  border:1px dashed var(--frame);
  border-radius:10px;
  padding:8px;
}
.order-card .tops{margin:.25rem 0 .25rem 1rem}

/* Build Stage */
.build-stage{
  position:relative;
  height:280px;
  background:#fff;
  border:2px dashed var(--border-2);
  border-radius:10px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
}
.build-base{
  width:180px;
  height:180px;
  filter:drop-shadow(0 2px 4px rgba(0,0,0,.15));
}
.build-dropzone{position:absolute; inset:0;}

/* Paleta de toppinguri */
.palette{
  display:grid;
  grid-template-columns:repeat(4,1fr);
  gap:8px;
  margin-top:8px
}
.palette button{
  display:flex;
  align-items:center;
  gap:6px;
  padding:.35rem .45rem;
  border:1px solid var(--border-2);
  border-radius:10px;
  background:#fffef7;
  cursor:grab;
  user-select:none;
}
.palette img{width:24px;height:24px;object-fit:contain}

/* Chips (toppinguri) */
.topping-chip{
  position:absolute;
  width:36px;
  height:36px;
  cursor:move;
  user-select:none;
  touch-action:none;
  transition: transform .06s ease;
}
.topping-chip:active{ transform: scale(0.98); }

/* Cuptor + progres */
.oven img{width:100%; max-width:320px; display:block; margin:0 auto}
.progress-container{
  width:90%; height:20px;
  background:var(--paper);
  border:2px solid var(--frame);
  border-radius:10px;
  margin:8px auto
}
.progress-bar{
  height:100%;
  width:0;
  background:var(--brand);
  border-radius:10px;
  transition:width .08s;
  position:relative; overflow:hidden
}
.progress-bar.pulse{box-shadow:0 0 10px rgba(255,200,0,.35) inset}
.progress-bar.pulse::after{
  content:"";
  position:absolute; inset:0;
  background:linear-gradient(90deg, transparent, rgba(255,255,255,.25), transparent);
  animation:barPulse 1.2s linear infinite
}
@keyframes barPulse{0%{transform:translateX(-100%)}100%{transform:translateX(100%)}}

/* Fereastra „hit” pentru coacere */
.hit-window{
  width:90%;
  height:16px;
  border:1px dashed #999;
  margin:0 auto;
  border-radius:10px;
  position:relative
}
.hit-window span{
  position:absolute;
  left:55%;
  width:10%;
  height:100%;
  background:#88d18a;
  opacity:.45;
  border-radius:10px
}
.hit-window span.pulse{animation:winPulse 1.2s ease-in-out infinite}
@keyframes winPulse{0%,100%{opacity:.35}50%{opacity:.6}}

/* Footer joc */
.game-footer{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:8px 12px
}

/* Scuturare cuptor când se ratează fereastra */
#oven-img.shake{animation:shake .35s ease-in-out}
@keyframes shake{
  0%,100%{transform:translateX(0)}
  20%{transform:translateX(-2px)}
  40%{transform:translateX(2px)}
  60%{transform:translateX(-1px)}
  80%{transform:translateX(1px)}
}

/* Particule colorate */
.particle{
  position:absolute;
  width:8px; height:8px;
  border-radius:50%;
  pointer-events:none;
  opacity:.9
}
@keyframes pop{
  0%{transform:scale(.6);opacity:1}
  100%{transform:scale(1.6) translate(var(--dx),var(--dy));opacity:0}
}

/* Toasts (versiune joc; există fallback și în base.css) */
.toast-container{position:fixed;top:12px;right:12px;z-index:100000;display:flex;flex-direction:column;gap:8px}
.toast{
  background:#222;
  color:#fff;
  padding:8px 12px;
  border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,.3);
  opacity:.95
}

/* Responsive */
@media (max-width: 1100px){
  .game-layout{ grid-template-columns: 300px 1fr; }
  .game-panel:last-child{ order:3 }
}
@media (max-width: 860px){
  .game-layout{ grid-template-columns: 1fr; }
  .build-stage{ height:260px }
  .palette{ grid-template-columns:repeat(3,1fr) }
}
