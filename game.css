/* Global */
body { margin:0; font-family:'Comic Sans MS', sans-serif; background:#fdf5e6; }
#top-bar { background:#fdd26e; padding:.5rem 1rem; font-size:1.2rem; display:flex; align-items:center; }
#top-bar .lei-display { margin-left:auto; font-weight:bold; }
#top-bar #day-display{ font-weight:bold }

/* Screens & scenes */
.screen { display:none; min-height:calc(100vh - 50px); padding:1rem; box-sizing:border-box; position:relative; }
.active-screen { display:block; }
.scene-shop { background:url('shop_background.png') center/cover no-repeat; }
.scene-kitchen { background:url('kitchen_background.png') center/cover no-repeat; }
.scene-worktop { background:url('worktop_background.png') center/cover no-repeat; }

/* Order ticker */
.order-ticket { position:absolute; top:.5rem; right:.5rem; background:#fffbee; border:2px solid #e6a937; padding:.5rem 1rem; border-radius:8px; font-weight:bold; }
.order-ticket.pulse{ animation:pulseGlow 2.2s ease-in-out infinite; }
@keyframes pulseGlow{0%,100%{box-shadow:0 0 0 0 rgba(229,169,55,.0)}50%{box-shadow:0 0 0 8px rgba(229,169,55,.35)}}

/* Client */
.client-right { position:absolute; bottom:6rem; right:3rem; font-size:5rem; animation:clientEnterFromRight 1s forwards; opacity:0; z-index:10; }
.client-right.idle { animation:clientEnterFromRight 1s forwards, clientIdle 3.2s ease-in-out 1s infinite; }
@keyframes clientEnterFromRight { from{ transform:translateX(200%); opacity:0 } to{ transform:translateX(0); opacity:1 } }
@keyframes clientIdle{ 0%,100%{ transform:translateY(0) rotate(0)} 50%{ transform:translateY(-4px) rotate(-1deg)} }

.speech-bubble { position:absolute; top:1rem; right:1rem; background:#fffbee; border:2px solid #e6a937; padding:.5rem; border-radius:8px; display:flex; align-items:center; justify-content:center; width:120px; height:80px; }

.panel { background:rgba(255,255,255,.85); border:2px solid #e6a937; border-radius:10px; padding:1rem; margin-top:2rem; max-width:320px; }
/* Generic panels wider */
.panel.wide{ max-width:900px; width:min(96%, 980px); }
.row{ display:flex; gap:1rem; flex-wrap:wrap }
.col{ flex:1 1 260px }
.grid{ display:grid; gap:.5rem; }
.grid.cols-2{ grid-template-columns:1fr 1fr; }
.grid.cols-3{ grid-template-columns:1fr 1fr 1fr; }
.grid.cols-4{ grid-template-columns:repeat(4, 1fr); }
.muted{ color:#555; font-size:.9rem }
.ok{ color:#1a8d2b; }
.warn{ color:#b35b0e; }
.bad{ color:#b3260e; }
.bar{ height:12px; background:#eee; border-radius:6px; overflow:hidden; border:1px solid #ccc }
.bar > span{ display:block; height:100%; background:#69c56f }
.bar.warn > span{ background:#f2b75f }
.bar.bad > span{ background:#e06a5f }
.num{ width:90px }
.right{ text-align:right }
.small{ font-size:.85rem }
.section-title{ font-weight:bold; margin:.2rem 0 .6rem 0 }
.table{ width:100%; border-collapse:collapse }
.table th,.table td{ border:1px solid #e6a937; padding:.35rem .5rem; background:#fffbee }
.table th{ background:#f9e7b9 }
button { background:#f5a623; border:0; color:#fff; padding:.6rem 1rem; border-radius:6px; font-size:1rem; cursor:pointer; margin-top:1rem; }
button:hover { background:#e58b17; }

/* Mascot */
.banisor { margin-top:2rem; text-align:center; }
.banisor-sprite{ width:120px; height:120px; display:inline-block; }
.banisor-sprite svg{ width:100%; height:100%; display:block; }
.banisor .banisor-sprite{ animation:bounce 2s infinite; }
.banisor-counter{ position:absolute; bottom:2rem; left:2rem; text-align:center; }
.banisor-counter .banisor-sprite{ width:140px; height:140px; animation:bounce 2s infinite; }
@keyframes bounce{ 0%,20%,50%,80%,100%{ transform:translateY(0)} 40%{ transform:translateY(-10px)} 60%{ transform:translateY(-5px)} }
.banisor-sprite .hand-wave{ transform-box:fill-box; transform-origin:left center; animation:hand-wave 2s ease-in-out infinite; }
@keyframes hand-wave{ 0%,100%{ transform:rotate(0)} 25%{ transform:rotate(18deg)} 50%{ transform:rotate(-10deg)} 75%{ transform:rotate(14deg)} }
.banisor-sprite .eye{ transform-box:fill-box; transform-origin:center; animation:blink 4.5s infinite; }
@keyframes blink{ 0%,92%,100%{ transform:scaleY(1)} 94%{ transform:scaleY(.05)} 96%{ transform:scaleY(1)} }
.banisor-sprite .hat{ transform-box:fill-box; transform-origin:center; animation:hat-bob 2s ease-in-out infinite; }
@keyframes hat-bob{ 0%,100%{ transform:translateY(0) rotate(0)} 50%{ transform:translateY(-1.5px) rotate(-3deg)} }
.spin-once{ animation:spinOnce .8s ease-out 1; }
@keyframes spinOnce{ from{ transform:rotate(0)} to{ transform:rotate(360deg)} }

/* Ingredients */
.ingredients-board{ position:absolute; left:0; bottom:12vh; width:100%; display:flex; justify-content:center; align-items:flex-start; flex-wrap:wrap; gap:1rem; }
.ingredient-slot{ position:relative; width:80px; height:80px; border:2px solid #e6a937; border-radius:50%; background:rgba(255,255,255,.85); display:flex; justify-content:center; align-items:center; cursor:grab; opacity:0; animation:popIn .6s forwards; transition:transform .2s, box-shadow .2s, opacity .2s; }
.ingredient-slot:hover{ transform:translateY(-3px) scale(1.05); box-shadow:0 6px 12px rgba(0,0,0,.2); }
.ingredient-slot.used{ opacity:.4; }
.ingredient-slot img{ width:70px; height:70px; }
.ingredient-name{ text-align:center; font-size:.75rem; margin-top:.2rem; width:80px; }
@keyframes popIn{ from{ transform:translateY(30px) scale(.8); opacity:0 } to{ transform:translateY(0) scale(1); opacity:1 } }

/* Bowl drop */
.bowl{ position:absolute; top:58%; left:50%; transform:translate(-50%,-40%); width:40%; height:32%; border:2px dashed #d3994c; border-bottom-left-radius:50%; border-bottom-right-radius:50%; background:rgba(249,213,163,.4); pointer-events:auto; }
.drop-in{ animation:drop-in .6s ease forwards; position:absolute; }
@keyframes drop-in{ from{ transform:translateY(-30px) scale(.6); opacity:0 } to{ transform:translateY(0) scale(1); opacity:1 } }

/* Bake progress */
.progress-container{ width:60%; height:20px; background:#fffbee; border:2px solid #e6a937; border-radius:10px; margin:5rem auto; }
.progress-bar{ height:100%; width:0; background:#f5a623; border-radius:10px; transition:width .1s; }

/* Decorate */
.cookie-container{ position:relative; width:200px; height:200px; margin:3rem auto 1rem; }
.cookie-base{ width:180px; height:180px; border-radius:50%; background:#f5c57e; border:4px solid #d3994c; margin:0 auto; }
.toppings-container{ display:flex; justify-content:center; gap:.8rem; margin-top:1rem; }
.topping-img{ width:40px; height:40px; cursor:grab; }
.shake{ animation:shake .4s ease both; }
@keyframes shake{ 10%,90%{ transform:translateX(-1px)} 20%,80%{ transform:translateX(2px)} 30%,50%,70%{ transform:translateX(-4px)} 40%,60%{ transform:translateX(4px)} }

/* Station bar */
.station-bar{ position:fixed; bottom:0; left:0; width:100%; display:flex; justify-content:center; gap:2rem; padding:.5rem; background:#333; color:#fff; font-size:.9rem; }
.station-bar .station{ padding:.3rem 1rem; border-radius:4px; background:#555; }
.station-bar .active{ background:#f5a623; color:#000; }

/* Confetti */
.confetti-container{ position:fixed; inset:0; pointer-events:none; overflow:hidden; }
.confetti-piece{ position:absolute; width:10px; height:10px; border-radius:50%; animation:confetti-fall 3s linear forwards; }
@keyframes confetti-fall{ 0%{ transform:translateY(-10%); opacity:1 } 100%{ transform:translateY(110vh); opacity:0 } }

/* Oven */
.oven-animation-container{ position:relative; width:400px; height:300px; margin:2rem auto; }
.oven-image{ width:100%; height:100%; position:absolute; inset:0; }
.baking-tray{ position:absolute; width:280px; height:150px; background:#c0c0c0; border:2px solid #8b8b8b; border-radius:8px; display:flex; justify-content:center; align-items:center; top:100px; left:-290px; animation:bake-animation 3s ease-in-out forwards; opacity:1; transition:opacity .2s; }
.cookie-on-tray{ width:100px; height:100px; }
@keyframes bake-animation{ 0%{ transform:translateX(0)} 20%{ transform:translateX(410px)} 80%{ transform:translateX(410px)} 100%{ transform:translateX(0)} }

/* New production widgets */
.belt{ border:2px dashed #e6a937; min-height:140px; padding:10px; background:rgba(255,255,255,.7) }
.tray-card{ display:inline-flex; flex-direction:column; gap:.25rem; border:2px solid #8b8b8b; background:#f6f6f6; border-radius:8px; padding:.5rem .6rem; margin:.25rem; width:180px }
.tray-header{ display:flex; justify-content:space-between; align-items:center; font-weight:bold }
.progress{ height:10px; background:#ddd; border-radius:6px; overflow:hidden }
.progress > span{ display:block; height:100%; background:#5aa9e6; width:0 }
.window{ background:#b6e388; height:100%; position:relative; left:55%; width:10%; opacity:.4 }
.tray-actions{ display:flex; gap:.5rem; flex-wrap:wrap }
.hint{ font-size:.8rem; color:#444 }

/* Intro modal */
.modal-overlay{ position:fixed; inset:0; background:rgba(0,0,0,.45); display:flex; align-items:center; justify-content:center; z-index:9999; }
.modal{ width:min(720px,92%); background:#fffbee; border:3px solid #e6a937; border-radius:12px; padding:1rem 1.2rem; box-shadow:0 12px 28px rgba(0,0,0,.22); }
.modal h2{ margin:0 0 .5rem 0 }
.modal ul{ margin:.4rem 0 .6rem 1rem }
.modal .footer{ display:flex; justify-content:space-between; align-items:center; margin-top:.6rem }
.modal label{ display:inline-flex; align-items:center; gap:.4rem; font-size:.95rem }
